# äº’åŠ¨æ¨¡å—APIå®ç°å®Œæˆ

## âœ… å®Œæˆæ—¶é—´
2026-02-06

---

## ğŸ“‹ å®ç°æ¸…å•

### 1. äº’åŠ¨æ§åˆ¶å™¨ âœ…
- [x] åˆ›å»º `src/controllers/interaction.controller.ts`
- [x] å®ç°ç‚¹èµå¸–å­åŠŸèƒ½
- [x] å®ç°å–æ¶ˆç‚¹èµå¸–å­åŠŸèƒ½
- [x] å®ç°ç‚¹èµè¯„è®ºåŠŸèƒ½
- [x] å®ç°å–æ¶ˆç‚¹èµè¯„è®ºåŠŸèƒ½
- [x] å®ç°æ”¶è—å¸–å­åŠŸèƒ½
- [x] å®ç°å–æ¶ˆæ”¶è—å¸–å­åŠŸèƒ½

### 2. è·¯ç”±é›†æˆ âœ…
- [x] åœ¨ `posts.routes.ts` ä¸­æ·»åŠ ç‚¹èµå’Œæ”¶è—è·¯ç”±
- [x] åœ¨ `comments.routes.ts` ä¸­æ·»åŠ ç‚¹èµè¯„è®ºè·¯ç”±
- [x] æ­£ç¡®è®¾ç½®è·¯ç”±é¡ºåºï¼ˆå…·ä½“è·¯ç”±åœ¨åŠ¨æ€è·¯ç”±ä¹‹å‰ï¼‰

### 3. åŠŸèƒ½ç‰¹æ€§ âœ…
- [x] æ”¯æŒå¸–å­ç‚¹èµ/å–æ¶ˆç‚¹èµ
- [x] æ”¯æŒè¯„è®ºç‚¹èµ/å–æ¶ˆç‚¹èµ
- [x] æ”¯æŒå¸–å­æ”¶è—/å–æ¶ˆæ”¶è—
- [x] è‡ªåŠ¨æ›´æ–°ç»Ÿè®¡ï¼ˆç‚¹èµæ•°ã€æ”¶è—æ•°ï¼‰
- [x] é˜²æ­¢é‡å¤æ“ä½œï¼ˆå·²ç‚¹èµ/æ”¶è—æ£€æŸ¥ï¼‰
- [x] æƒé™éªŒè¯ï¼ˆéœ€è¦ç™»å½•ï¼‰
- [x] æ•°æ®éªŒè¯ï¼ˆå¸–å­/è¯„è®ºå­˜åœ¨æ€§æ£€æŸ¥ï¼‰

---

## ğŸ”Œ APIæ¥å£

### 1. ç‚¹èµå¸–å­
```
POST /api/posts/:id/like
```

**è¯·æ±‚å¤´ï¼š**
```
Authorization: Bearer <token>
```

**å“åº”ï¼š**
```json
{
  "success": true,
  "message": "ç‚¹èµæˆåŠŸ",
  "data": {
    "isLiked": true,
    "likeCount": 11
  }
}
```

### 2. å–æ¶ˆç‚¹èµå¸–å­
```
DELETE /api/posts/:id/like
```

**è¯·æ±‚å¤´ï¼š**
```
Authorization: Bearer <token>
```

**å“åº”ï¼š**
```json
{
  "success": true,
  "message": "å–æ¶ˆç‚¹èµæˆåŠŸ",
  "data": {
    "isLiked": false,
    "likeCount": 10
  }
}
```

### 3. ç‚¹èµè¯„è®º
```
POST /api/comments/:id/like
```

**è¯·æ±‚å¤´ï¼š**
```
Authorization: Bearer <token>
```

**å“åº”ï¼š**
```json
{
  "success": true,
  "message": "ç‚¹èµæˆåŠŸ",
  "data": {
    "isLiked": true,
    "likeCount": 5
  }
}
```

### 4. å–æ¶ˆç‚¹èµè¯„è®º
```
DELETE /api/comments/:id/like
```

**è¯·æ±‚å¤´ï¼š**
```
Authorization: Bearer <token>
```

**å“åº”ï¼š**
```json
{
  "success": true,
  "message": "å–æ¶ˆç‚¹èµæˆåŠŸ",
  "data": {
    "isLiked": false,
    "likeCount": 4
  }
}
```

### 5. æ”¶è—å¸–å­
```
POST /api/posts/:id/favorite
```

**è¯·æ±‚å¤´ï¼š**
```
Authorization: Bearer <token>
```

**å“åº”ï¼š**
```json
{
  "success": true,
  "message": "æ”¶è—æˆåŠŸ",
  "data": {
    "isFavorited": true,
    "favoriteCount": 8
  }
}
```

### 6. å–æ¶ˆæ”¶è—å¸–å­
```
DELETE /api/posts/:id/favorite
```

**è¯·æ±‚å¤´ï¼š**
```
Authorization: Bearer <token>
```

**å“åº”ï¼š**
```json
{
  "success": true,
  "message": "å–æ¶ˆæ”¶è—æˆåŠŸ",
  "data": {
    "isFavorited": false,
    "favoriteCount": 7
  }
}
```

---

## ğŸ¯ å®ç°ç»†èŠ‚

### ç‚¹èµæœºåˆ¶
- ä½¿ç”¨å¤šæ€è®¾è®¡ï¼ˆtargetType + targetIdï¼‰æ”¯æŒå¸–å­å’Œè¯„è®º
- ä½¿ç”¨å”¯ä¸€çº¦æŸé˜²æ­¢é‡å¤ç‚¹èµ
- è‡ªåŠ¨æ›´æ–°å¸–å­å’Œè¯„è®ºçš„ç‚¹èµæ•°
- æ”¯æŒå–æ¶ˆç‚¹èµæ“ä½œ

### æ”¶è—æœºåˆ¶
- ä¸“é—¨é’ˆå¯¹å¸–å­çš„æ”¶è—åŠŸèƒ½
- ä½¿ç”¨å”¯ä¸€çº¦æŸé˜²æ­¢é‡å¤æ”¶è—
- è‡ªåŠ¨æ›´æ–°å¸–å­çš„æ”¶è—æ•°
- æ”¯æŒå–æ¶ˆæ”¶è—æ“ä½œ

### æ•°æ®ç»Ÿè®¡
- ç‚¹èµæ—¶è‡ªåŠ¨å¢åŠ å¯¹åº”ç›®æ ‡çš„likeCount
- å–æ¶ˆç‚¹èµæ—¶è‡ªåŠ¨å‡å°‘å¯¹åº”ç›®æ ‡çš„likeCount
- æ”¶è—æ—¶è‡ªåŠ¨å¢åŠ å¸–å­çš„favoriteCount
- å–æ¶ˆæ”¶è—æ—¶è‡ªåŠ¨å‡å°‘å¸–å­çš„favoriteCount

### æƒé™æ§åˆ¶
- æ‰€æœ‰æ“ä½œéƒ½éœ€è¦ç™»å½•è®¤è¯
- éªŒè¯å¸–å­/è¯„è®ºæ˜¯å¦å­˜åœ¨
- éªŒè¯å¸–å­/è¯„è®ºæ˜¯å¦å·²åˆ é™¤
- é˜²æ­¢é‡å¤æ“ä½œ

---

## ğŸ“Š APIç»Ÿè®¡

### å·²å®ç°æ¥å£ï¼ˆ14/39ï¼‰
- âœ… è®¤è¯æ¨¡å—ï¼ˆ4ä¸ªï¼‰
- âœ… å¸–å­æ¨¡å—ï¼ˆ5ä¸ªï¼‰
- âœ… åˆ†ç±»æ¨¡å—ï¼ˆ1ä¸ªï¼‰
- âœ… è¯„è®ºæ¨¡å—ï¼ˆ4ä¸ªï¼‰
- âœ… äº’åŠ¨æ¨¡å—ï¼ˆ6ä¸ªï¼‰â† æ–°å¢ï¼ˆåŒ…å«è¯„è®ºç‚¹èµï¼‰

### å¾…å®ç°æ¥å£ï¼ˆ25ä¸ªï¼‰
- â­ï¸ ç”¨æˆ·æ¨¡å—ï¼ˆ2ä¸ªï¼‰
- â­ï¸ ç§ä¿¡æ¨¡å—ï¼ˆ5ä¸ªï¼‰
- â­ï¸ å­¦ä¹ èµ„æ–™æ¨¡å—ï¼ˆ3ä¸ªï¼‰
- â­ï¸ å…³æ³¨æ¨¡å—ï¼ˆ4ä¸ªï¼‰
- â­ï¸ é€šçŸ¥æ¨¡å—ï¼ˆ4ä¸ªï¼‰
- â­ï¸ æœç´¢æ¨¡å—ï¼ˆ1ä¸ªï¼‰
- â­ï¸ æ–‡ä»¶ä¸Šä¼ ï¼ˆ2ä¸ªï¼‰

---

## ğŸš€ ä¸‹ä¸€æ­¥è®¡åˆ’

### ä¼˜å…ˆçº§1ï¼šå®ç°ç”¨æˆ·æ¨¡å—API
- GET /api/users/:id - è·å–ç”¨æˆ·ä¿¡æ¯
- PUT /api/users/:id - æ›´æ–°ç”¨æˆ·ä¿¡æ¯

### ä¼˜å…ˆçº§2ï¼šå®ç°ç§ä¿¡æ¨¡å—APIï¼ˆP1åŠŸèƒ½ï¼‰
- GET /api/conversations - è·å–å¯¹è¯åˆ—è¡¨
- GET /api/conversations/:userId - è·å–å¯¹è¯è¯¦æƒ…
- POST /api/conversations/:userId/messages - å‘é€æ¶ˆæ¯
- PUT /api/messages/:id/read - æ ‡è®°å·²è¯»
- GET /api/messages/unread-count - è·å–æœªè¯»æ•°

### ä¼˜å…ˆçº§3ï¼šå®ç°å…³æ³¨æ¨¡å—API
- POST /api/users/:id/follow - å…³æ³¨ç”¨æˆ·
- DELETE /api/users/:id/follow - å–æ¶ˆå…³æ³¨
- GET /api/users/:id/following - è·å–å…³æ³¨åˆ—è¡¨
- GET /api/users/:id/followers - è·å–ç²‰ä¸åˆ—è¡¨

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** v1.0  
**åˆ›å»ºæ—¥æœŸï¼š** 2026-02-06  
**çŠ¶æ€ï¼š** âœ… äº’åŠ¨æ¨¡å—APIå®ç°å®Œæˆ
