# æ•°æ®åº“é…ç½®æŒ‡å—

## ğŸ“‹ é…ç½®æ­¥éª¤

### æ­¥éª¤1ï¼šå®‰è£…PostgreSQL

å¦‚æœè¿˜æ²¡æœ‰å®‰è£…PostgreSQLï¼Œè¯·å…ˆå®‰è£…ï¼š

**Windowsï¼š**
1. ä¸‹è½½PostgreSQLï¼šhttps://www.postgresql.org/download/windows/
2. è¿è¡Œå®‰è£…ç¨‹åº
3. è®°ä½è®¾ç½®çš„postgresç”¨æˆ·å¯†ç 

**macOSï¼š**
```bash
brew install postgresql
brew services start postgresql
```

**Linuxï¼ˆUbuntuï¼‰ï¼š**
```bash
sudo apt update
sudo apt install postgresql postgresql-contrib
sudo systemctl start postgresql
```

---

### æ­¥éª¤2ï¼šåˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·

**è¿æ¥PostgreSQLï¼š**
```bash
# Windowsï¼ˆä½¿ç”¨psqlå‘½ä»¤è¡Œï¼‰
psql -U postgres

# æˆ–ä½¿ç”¨pgAdminå›¾å½¢ç•Œé¢
```

**åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·ï¼š**
```sql
-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE forum;

-- åˆ›å»ºç”¨æˆ·
CREATE USER forum_user WITH PASSWORD 'your_password_here';

-- æˆæƒ
GRANT ALL PRIVILEGES ON DATABASE forum TO forum_user;

-- å…è®¸ç”¨æˆ·åˆ›å»ºæ•°æ®åº“ï¼ˆç”¨äºè¿ç§»ï¼‰
ALTER USER forum_user CREATEDB;

-- é€€å‡º
\q
```

**éªŒè¯è¿æ¥ï¼š**
```bash
psql -U forum_user -d forum -h localhost
```

---

### æ­¥éª¤3ï¼šé…ç½®ç¯å¢ƒå˜é‡

**ç¼–è¾‘ `backend/.env` æ–‡ä»¶ï¼š**

```env
# æ•°æ®åº“è¿æ¥
DATABASE_URL="postgresql://forum_user:your_password_here@localhost:5432/forum?schema=public"

# JWTå¯†é’¥ï¼ˆç”Ÿæˆéšæœºå­—ç¬¦ä¸²ï¼‰
JWT_SECRET="your_very_long_and_secure_jwt_secret_key_here_min_32_chars"
```

**ç”ŸæˆJWTå¯†é’¥ï¼ˆå¯é€‰ï¼‰ï¼š**
```bash
# ä½¿ç”¨Node.jsç”Ÿæˆéšæœºå¯†é’¥
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
```

---

### æ­¥éª¤4ï¼šè¿è¡Œæ•°æ®åº“è¿ç§»

```bash
cd backend

# ç”ŸæˆPrisma Client
npm run prisma:generate

# åˆ›å»ºè¿ç§»æ–‡ä»¶
npx prisma migrate dev --name init

# è¿è¡Œç§å­æ•°æ®
npm run prisma:seed
```

**å¦‚æœé‡åˆ°é”™è¯¯ï¼š**
- æ£€æŸ¥æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥æ•°æ®åº“ç”¨æˆ·æ˜¯å¦æœ‰æƒé™
- æ£€æŸ¥PostgreSQLæœåŠ¡æ˜¯å¦è¿è¡Œ

---

### æ­¥éª¤5ï¼šéªŒè¯æ•°æ®åº“

**ä½¿ç”¨Prisma StudioæŸ¥çœ‹æ•°æ®ï¼š**
```bash
npx prisma studio
```

è¿™ä¼šæ‰“å¼€æµè§ˆå™¨ï¼Œæ˜¾ç¤ºæ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨å’Œæ•°æ®ã€‚

**æˆ–ä½¿ç”¨SQLæŸ¥è¯¢ï¼š**
```sql
-- è¿æ¥æ•°æ®åº“
psql -U forum_user -d forum

-- æŸ¥çœ‹æ‰€æœ‰è¡¨
\dt

-- æŸ¥çœ‹åˆ†ç±»æ•°æ®
SELECT * FROM categories;
```

---

## ğŸ”§ å¸¸è§é—®é¢˜

### é—®é¢˜1ï¼šè¿æ¥æ•°æ®åº“å¤±è´¥

**é”™è¯¯ä¿¡æ¯ï¼š**
```
Error: P1001: Can't reach database server
```

**è§£å†³æ–¹æ³•ï¼š**
1. æ£€æŸ¥PostgreSQLæœåŠ¡æ˜¯å¦è¿è¡Œ
2. æ£€æŸ¥è¿æ¥å­—ç¬¦ä¸²æ˜¯å¦æ­£ç¡®
3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

### é—®é¢˜2ï¼šæƒé™ä¸è¶³

**é”™è¯¯ä¿¡æ¯ï¼š**
```
Error: P1000: Authentication failed
```

**è§£å†³æ–¹æ³•ï¼š**
1. æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®
2. æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è®¿é—®æ•°æ®åº“

### é—®é¢˜3ï¼šæ•°æ®åº“ä¸å­˜åœ¨

**é”™è¯¯ä¿¡æ¯ï¼š**
```
Error: P1003: Database does not exist
```

**è§£å†³æ–¹æ³•ï¼š**
1. å…ˆåˆ›å»ºæ•°æ®åº“ï¼ˆè§æ­¥éª¤2ï¼‰
2. æ£€æŸ¥è¿æ¥å­—ç¬¦ä¸²ä¸­çš„æ•°æ®åº“åæ˜¯å¦æ­£ç¡®

---

## âœ… é…ç½®å®Œæˆæ£€æŸ¥æ¸…å•

- [ ] PostgreSQLå·²å®‰è£…
- [ ] æ•°æ®åº“`forum`å·²åˆ›å»º
- [ ] ç”¨æˆ·`forum_user`å·²åˆ›å»ºå¹¶æˆæƒ
- [ ] `.env`æ–‡ä»¶å·²é…ç½®
- [ ] `DATABASE_URL`å·²è®¾ç½®
- [ ] `JWT_SECRET`å·²è®¾ç½®
- [ ] æ•°æ®åº“è¿ç§»å·²è¿è¡Œ
- [ ] ç§å­æ•°æ®å·²å¯¼å…¥
- [ ] Prisma Studioå¯ä»¥æ‰“å¼€

---

## ğŸš€ ä¸‹ä¸€æ­¥

é…ç½®å®Œæˆåï¼Œå¯ä»¥ï¼š
1. å¯åŠ¨åç«¯æœåŠ¡å™¨ï¼š`npm run dev`
2. æµ‹è¯•APIæ¥å£
3. å¼€å§‹å¼€å‘å…¶ä»–åŠŸèƒ½

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** v1.0  
**åˆ›å»ºæ—¥æœŸï¼š** 2026-02-06
